#!/bin/sh
#
# watcher

usage() {
    base=$(basename "$0")

    cat >&2 << EOF
Usage:
    $base
EOF

    test $# -eq 0 || exit "$1"
}

main() {
    wew | while read -r ev wid; do
        case "$ev" in
            CREATE)
                wattr o "$wid" || {
                    test "$(atomx WM_CLASS "$wid")" = "qutebrowser" && {
                        test "$(wattr xywh "$wid")" = "50 50 800 600" && {
                            move center "$wid" "$(lsm -p)"
                        }
                    }
                }
                ;;
            ENTER)    chwso -r "$wid" ;;
            FOCUS_IN) chwso -r "$wid" ;;
        esac
    done
}

main "$@"
