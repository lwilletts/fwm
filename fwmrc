#!/bin/sh
# shellcheck disable=SC2015
#
# fwmrc

# check there is a display running
test -z "$DISPLAY" && return 1

# check if arg 1 is an integer
intCheck() {
    test "$1" -ne 0 2> /dev/null
    test "$?" -ne 2 || return 1
}

widCheck() {
    case "$1" in
        0x*) wattr "$1" ;;
        *)   return 1   ;;
    esac
}

# list windows on focused screen or given screen
listwindows() {
    mattr "$1"

    case "$?" in
        0)
            SCR="$1"
            ;;
        *)
            PFW="$(pfw 2> /dev/null || printf '%s\n' "0x00000000")"
            SCR="$(mattr i "$PFW")"
            ;;
    esac

    mattr si $(lsw) | grep "$SCR" | cut -d\  -f 1
}

wmenv() {
    PFW="$(pfw 2> /dev/null || printf '%s\n' "0x00000000")"
    export PFW BW=0 JUMP=20
}

wmgaps() {
    PFM="$(pfm)"
    PRI="$(lsm -p)"
    SEC="$(lsm | grep -v "$PRI" | head -n 1)"
    export PFM PRI SEC
    export TGAP=30 BGAP=50 LGAP=50 RGAP=50 IGAP=20
}

wmcolours() {
    CLR="$(grep "#include" ~/.Xresources | cut -d\" -f 2)"
    URGENT="$(grep -w "color1" "$CLR" | cut -d\# -f 2)"
    ACTIVE="$(grep -w "foreground" "$CLR" | cut -d\# -f 2)"
    INACTIVE="$(grep -w "background" "$CLR" | cut -d\# -f 2)"
    export ACTIVE URGENT INACTIVE
}
